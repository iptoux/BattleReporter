<?php

class KBFetch {
    
    private static $availableParams = array("corporationID", "solarSystemID", "startTime", "endTime");
    
    public static function fetchBattle($params = array()) {
        
        /*$parameters = array();
        
        foreach ($params as $key => $val) {
            if (in_array($key, self::$availableParams))
                $parameters[$key] = $val;
        }
        
        $fetchedResult = Utils::curl(
            BR_FETCH_SOURCE_URL,
            $parameters,
            array(
                "queryParams" => false,
                "caching" => "auto",
                "cachePath" => __DIR__ . '/../cache'
            )
        );*/
        
        $fetchedResult = <<<EOT
[{"killID":"44358849","solarSystemID":"30004738","killTime":"2015-02-03 21:50:00","moonID":"0","victim":{"shipTypeID":"623","damageTaken":"29716","factionName":"","factionID":"0","allianceName":"","allianceID":"0","corporationName":"Bitslix","corporationID":"98270080","characterName":"Piaggo","characterID":"482596415","victim":""},"attackers":[{"characterID":"93642621","characterName":"satotr haringhton","corporationID":"98257549","corporationName":"Teutate raiders","allianceID":"99002938","allianceName":"DARKNESS.","factionID":"0","factionName":"","securityStatus":"4.92219403556354","damageDone":"4300","finalBlow":"1","weaponTypeID":"3009","shipTypeID":"12003"},{"characterID":"583104495","characterName":"CMD Kurtz","corporationID":"98257549","corporationName":"Teutate raiders","allianceID":"99002938","allianceName":"DARKNESS.","factionID":"0","factionName":"","securityStatus":"4.6","damageDone":"13876","finalBlow":"0","weaponTypeID":"29988","shipTypeID":"29988"},{"characterID":"208953101","characterName":"Kriso0","corporationID":"98257549","corporationName":"Teutate raiders","allianceID":"99002938","allianceName":"DARKNESS.","factionID":"0","factionName":"","securityStatus":"-2.9","damageDone":"3278","finalBlow":"0","weaponTypeID":"29988","shipTypeID":"29988"},{"characterID":"119717212","characterName":"vaucluseman","corporationID":"98257549","corporationName":"Teutate raiders","allianceID":"99002938","allianceName":"DARKNESS.","factionID":"0","factionName":"","securityStatus":"5","damageDone":"2921","finalBlow":"0","weaponTypeID":"2185","shipTypeID":"2006"},{"characterID":"736681405","characterName":"the killer3","corporationID":"98257549","corporationName":"Teutate raiders","allianceID":"99002938","allianceName":"DARKNESS.","factionID":"0","factionName":"","securityStatus":"4.3","damageDone":"2356","finalBlow":"0","weaponTypeID":"29986","shipTypeID":"29986"},{"characterID":"1742153816","characterName":"Ash Bellis''Mundis","corporationID":"98257549","corporationName":"Teutate raiders","allianceID":"99002938","allianceName":"DARKNESS.","factionID":"0","factionName":"","securityStatus":"2.8","damageDone":"2238","finalBlow":"0","weaponTypeID":"29986","shipTypeID":"29986"},{"characterID":"936272791","characterName":"faelyza","corporationID":"98257549","corporationName":"Teutate raiders","allianceID":"99002938","allianceName":"DARKNESS.","factionID":"0","factionName":"","securityStatus":"5","damageDone":"364","finalBlow":"0","weaponTypeID":"3520","shipTypeID":"29986"},{"characterID":"93844906","characterName":"Nostro Malkchour","corporationID":"98257549","corporationName":"Teutate raiders","allianceID":"99002938","allianceName":"DARKNESS.","factionID":"0","factionName":"","securityStatus":"5","damageDone":"172","finalBlow":"0","weaponTypeID":"2006","shipTypeID":"2006"},{"characterID":"93855102","characterName":"Muk Makbema","corporationID":"98257549","corporationName":"Teutate raiders","allianceID":"99002938","allianceName":"DARKNESS.","factionID":"0","factionName":"","securityStatus":"4.8","damageDone":"142","finalBlow":"0","weaponTypeID":"2006","shipTypeID":"2006"},{"characterID":"126191644","characterName":"sirius farr","corporationID":"98257549","corporationName":"Teutate raiders","allianceID":"99002938","allianceName":"DARKNESS.","factionID":"0","factionName":"","securityStatus":"4.1","damageDone":"69","finalBlow":"0","weaponTypeID":"29990","shipTypeID":"29990"},{"characterID":"1643512576","characterName":"Tendiana","corporationID":"98257549","corporationName":"Teutate raiders","allianceID":"99002938","allianceName":"DARKNESS.","factionID":"0","factionName":"","securityStatus":"5","damageDone":"0","finalBlow":"0","weaponTypeID":"3244","shipTypeID":"11198"},{"characterID":"549742325","characterName":"XTREME1977","corporationID":"98257549","corporationName":"Teutate raiders","allianceID":"99002938","allianceName":"DARKNESS.","factionID":"0","factionName":"","securityStatus":"0.6","damageDone":"0","finalBlow":"0","weaponTypeID":"3512","shipTypeID":"2006"},{"characterID":"1260336909","characterName":"Ludakin DarkTribal","corporationID":"98257549","corporationName":"Teutate raiders","allianceID":"99002938","allianceName":"DARKNESS.","factionID":"0","factionName":"","securityStatus":"5","damageDone":"0","finalBlow":"0","weaponTypeID":"5302","shipTypeID":"633"}],"items":[{"typeID":"2281","flag":"21","qtyDropped":"1","qtyDestroyed":"0","singleton":"0"},{"typeID":"12805","flag":"28","qtyDropped":"67","qtyDestroyed":"0","singleton":"0"},{"typeID":"12346","flag":"31","qtyDropped":"1","qtyDestroyed":"0","singleton":"0"},{"typeID":"2048","flag":"11","qtyDropped":"1","qtyDestroyed":"0","singleton":"0"},{"typeID":"12805","flag":"31","qtyDropped":"67","qtyDestroyed":"0","singleton":"0"},{"typeID":"3841","flag":"20","qtyDropped":"1","qtyDestroyed":"0","singleton":"0"},{"typeID":"12805","flag":"5","qtyDropped":"1130","qtyDestroyed":"0","singleton":"0"},{"typeID":"12805","flag":"27","qtyDropped":"67","qtyDestroyed":"0","singleton":"0"},{"typeID":"10190","flag":"13","qtyDropped":"1","qtyDestroyed":"0","singleton":"0"},{"typeID":"12346","flag":"27","qtyDropped":"0","qtyDestroyed":"1","singleton":"0"},{"typeID":"10190","flag":"14","qtyDropped":"1","qtyDestroyed":"0","singleton":"0"},{"typeID":"12346","flag":"28","qtyDropped":"0","qtyDestroyed":"1","singleton":"0"},{"typeID":"12805","flag":"30","qtyDropped":"0","qtyDestroyed":"67","singleton":"0"},{"typeID":"3841","flag":"22","qtyDropped":"0","qtyDestroyed":"1","singleton":"0"},{"typeID":"5439","flag":"23","qtyDropped":"0","qtyDestroyed":"1","singleton":"0"},{"typeID":"5975","flag":"19","qtyDropped":"0","qtyDestroyed":"1","singleton":"0"},{"typeID":"12058","flag":"5","qtyDropped":"1","qtyDestroyed":"0","singleton":"0"},{"typeID":"23031","flag":"5","qtyDropped":"0","qtyDestroyed":"2390","singleton":"0"},{"typeID":"12346","flag":"29","qtyDropped":"0","qtyDestroyed":"1","singleton":"0"},{"typeID":"28668","flag":"5","qtyDropped":"0","qtyDestroyed":"1","singleton":"0"},{"typeID":"12805","flag":"29","qtyDropped":"67","qtyDestroyed":"0","singleton":"0"},{"typeID":"12346","flag":"30","qtyDropped":"0","qtyDestroyed":"1","singleton":"0"},{"typeID":"31718","flag":"92","qtyDropped":"0","qtyDestroyed":"1","singleton":"0"},{"typeID":"10190","flag":"5","qtyDropped":"1","qtyDestroyed":"0","singleton":"0"},{"typeID":"1355","flag":"12","qtyDropped":"1","qtyDestroyed":"0","singleton":"0"},{"typeID":"31790","flag":"93","qtyDropped":"0","qtyDestroyed":"1","singleton":"0"},{"typeID":"12801","flag":"5","qtyDropped":"914","qtyDestroyed":"0","singleton":"0"},{"typeID":"31790","flag":"94","qtyDropped":"0","qtyDestroyed":"1","singleton":"0"}],"zkb":{"totalValue":"30766743.52","points":"3","source":"API"}},{"killID":"44358819","solarSystemID":"30004738","killTime":"2015-02-03 21:49:00","moonID":"0","victim":{"shipTypeID":"623","damageTaken":"36336","factionName":"","factionID":"0","allianceName":"","allianceID":"0","corporationName":"Bitslix","corporationID":"98270080","characterName":"Biskuit","characterID":"514020578","victim":""},"attackers":[{"characterID":"936272791","characterName":"faelyza","corporationID":"98257549","corporationName":"Teutate raiders","allianceID":"99002938","allianceName":"DARKNESS.","factionID":"0","factionName":"","securityStatus":"5.00788717235078","damageDone":"3798","finalBlow":"1","weaponTypeID":"3520","shipTypeID":"29986"},{"characterID":"208953101","characterName":"Kriso0","corporationID":"98257549","corporationName":"Teutate raiders","allianceID":"99002938","allianceName":"DARKNESS.","factionID":"0","factionName":"","securityStatus":"-2.9","damageDone":"6172","finalBlow":"0","weaponTypeID":"29988","shipTypeID":"29988"},{"characterID":"1742153816","characterName":"Ash Bellis''Mundis","corporationID":"98257549","corporationName":"Teutate raiders","allianceID":"99002938","allianceName":"DARKNESS.","factionID":"0","factionName":"","securityStatus":"2.8","damageDone":"5514","finalBlow":"0","weaponTypeID":"29986","shipTypeID":"29986"},{"characterID":"1846376370","characterName":"Kibahound","corporationID":"98257549","corporationName":"Teutate raiders","allianceID":"99002938","allianceName":"DARKNESS.","factionID":"0","factionName":"","securityStatus":"5","damageDone":"3998","finalBlow":"0","weaponTypeID":"29986","shipTypeID":"29986"},{"characterID":"736681405","characterName":"the killer3","corporationID":"98257549","corporationName":"Teutate raiders","allianceID":"99002938","allianceName":"DARKNESS.","factionID":"0","factionName":"","securityStatus":"4.3","damageDone":"3928","finalBlow":"0","weaponTypeID":"29986","shipTypeID":"29986"},{"characterID":"119717212","characterName":"vaucluseman","corporationID":"98257549","corporationName":"Teutate raiders","allianceID":"99002938","allianceName":"DARKNESS.","factionID":"0","factionName":"","securityStatus":"5","damageDone":"3618","finalBlow":"0","weaponTypeID":"3512","shipTypeID":"2006"},{"characterID":"93855102","characterName":"Muk Makbema","corporationID":"98257549","corporationName":"Teutate raiders","allianceID":"99002938","allianceName":"DARKNESS.","factionID":"0","factionName":"","securityStatus":"4.8","damageDone":"3137","finalBlow":"0","weaponTypeID":"2006","shipTypeID":"2006"},{"characterID":"1107265744","characterName":"Apollo 78","corporationID":"98257549","corporationName":"Teutate raiders","allianceID":"99002938","allianceName":"DARKNESS.","factionID":"0","factionName":"","securityStatus":"5","damageDone":"2613","finalBlow":"0","weaponTypeID":"2006","shipTypeID":"2006"},{"characterID":"93642621","characterName":"satotr haringhton","corporationID":"98257549","corporationName":"Teutate raiders","allianceID":"99002938","allianceName":"DARKNESS.","factionID":"0","factionName":"","securityStatus":"4.9","damageDone":"1472","finalBlow":"0","weaponTypeID":"12003","shipTypeID":"12003"},{"characterID":"583104495","characterName":"CMD Kurtz","corporationID":"98257549","corporationName":"Teutate raiders","allianceID":"99002938","allianceName":"DARKNESS.","factionID":"0","factionName":"","securityStatus":"4.6","damageDone":"1021","finalBlow":"0","weaponTypeID":"29988","shipTypeID":"29988"},{"characterID":"1393715466","characterName":"Baltior","corporationID":"98257549","corporationName":"Teutate raiders","allianceID":"99002938","allianceName":"DARKNESS.","factionID":"0","factionName":"","securityStatus":"4","damageDone":"375","finalBlow":"0","weaponTypeID":"2488","shipTypeID":"11987"},{"characterID":"126191644","characterName":"sirius farr","corporationID":"98257549","corporationName":"Teutate raiders","allianceID":"99002938","allianceName":"DARKNESS.","factionID":"0","factionName":"","securityStatus":"4.1","damageDone":"309","finalBlow":"0","weaponTypeID":"29990","shipTypeID":"29990"},{"characterID":"549742325","characterName":"XTREME1977","corporationID":"98257549","corporationName":"Teutate raiders","allianceID":"99002938","allianceName":"DARKNESS.","factionID":"0","factionName":"","securityStatus":"0.6","damageDone":"178","finalBlow":"0","weaponTypeID":"2185","shipTypeID":"2006"},{"characterID":"1260336909","characterName":"Ludakin DarkTribal","corporationID":"98257549","corporationName":"Teutate raiders","allianceID":"99002938","allianceName":"DARKNESS.","factionID":"0","factionName":"","securityStatus":"5","damageDone":"110","finalBlow":"0","weaponTypeID":"27361","shipTypeID":"633"},{"characterID":"90685553","characterName":"Alan Traz","corporationID":"98257549","corporationName":"Teutate raiders","allianceID":"99002938","allianceName":"DARKNESS.","factionID":"0","factionName":"","securityStatus":"5","damageDone":"93","finalBlow":"0","weaponTypeID":"29990","shipTypeID":"29990"},{"characterID":"90105635","characterName":"Teratroll","corporationID":"955058602","corporationName":"German Angels","allianceID":"99002938","allianceName":"DARKNESS.","factionID":"0","factionName":"","securityStatus":"5","damageDone":"0","finalBlow":"0","weaponTypeID":"33450","shipTypeID":"32309"},{"characterID":"1643512576","characterName":"Tendiana","corporationID":"98257549","corporationName":"Teutate raiders","allianceID":"99002938","allianceName":"DARKNESS.","factionID":"0","factionName":"","securityStatus":"5","damageDone":"0","finalBlow":"0","weaponTypeID":"448","shipTypeID":"11198"}],"items":[{"typeID":"2281","flag":"21","qtyDropped":"0","qtyDestroyed":"1","singleton":"0"},{"typeID":"12346","flag":"31","qtyDropped":"1","qtyDestroyed":"0","singleton":"0"},{"typeID":"12801","flag":"30","qtyDropped":"0","qtyDestroyed":"54","singleton":"0"},{"typeID":"2048","flag":"11","qtyDropped":"0","qtyDestroyed":"1","singleton":"0"},{"typeID":"448","flag":"23","qtyDropped":"0","qtyDestroyed":"1","singleton":"0"},{"typeID":"2048","flag":"5","qtyDropped":"0","qtyDestroyed":"1","singleton":"0"},{"typeID":"12805","flag":"5","qtyDropped":"1550","qtyDestroyed":"0","singleton":"0"},{"typeID":"10190","flag":"13","qtyDropped":"1","qtyDestroyed":"0","singleton":"0"},{"typeID":"12346","flag":"27","qtyDropped":"1","qtyDestroyed":"0","singleton":"0"},{"typeID":"10190","flag":"14","qtyDropped":"1","qtyDestroyed":"0","singleton":"0"},{"typeID":"12346","flag":"28","qtyDropped":"0","qtyDestroyed":"1","singleton":"0"},{"typeID":"12801","flag":"29","qtyDropped":"54","qtyDestroyed":"0","singleton":"0"},{"typeID":"24348","flag":"5","qtyDropped":"1","qtyDestroyed":"0","singleton":"0"},{"typeID":"3841","flag":"22","qtyDropped":"1","qtyDestroyed":"0","singleton":"0"},{"typeID":"12801","flag":"27","qtyDropped":"0","qtyDestroyed":"54","singleton":"0"},{"typeID":"5975","flag":"19","qtyDropped":"0","qtyDestroyed":"1","singleton":"0"},{"typeID":"23031","flag":"5","qtyDropped":"2345","qtyDestroyed":"0","singleton":"0"},{"typeID":"12346","flag":"29","qtyDropped":"0","qtyDestroyed":"1","singleton":"0"},{"typeID":"28668","flag":"5","qtyDropped":"75","qtyDestroyed":"0","singleton":"0"},{"typeID":"12801","flag":"28","qtyDropped":"54","qtyDestroyed":"0","singleton":"0"},{"typeID":"12346","flag":"30","qtyDropped":"0","qtyDestroyed":"1","singleton":"0"},{"typeID":"31718","flag":"92","qtyDropped":"0","qtyDestroyed":"1","singleton":"0"},{"typeID":"12801","flag":"31","qtyDropped":"0","qtyDestroyed":"54","singleton":"0"},{"typeID":"1355","flag":"12","qtyDropped":"1","qtyDestroyed":"0","singleton":"0"},{"typeID":"31790","flag":"93","qtyDropped":"0","qtyDestroyed":"1","singleton":"0"},{"typeID":"3841","flag":"20","qtyDropped":"0","qtyDestroyed":"1","singleton":"0"},{"typeID":"12801","flag":"5","qtyDropped":"1425","qtyDestroyed":"0","singleton":"0"},{"typeID":"31790","flag":"94","qtyDropped":"0","qtyDestroyed":"1","singleton":"0"}],"zkb":{"totalValue":"32581209.93","points":"2","source":"API"}},{"killID":"44358797","solarSystemID":"30004738","killTime":"2015-02-03 21:48:00","moonID":"0","victim":{"shipTypeID":"12019","damageTaken":"17721","factionName":"","factionID":"0","allianceName":"DARKNESS.","allianceID":"99002938","corporationName":"Teutate raiders","corporationID":"98257549","characterName":"kazar far","characterID":"108921673","victim":""},"attackers":[{"characterID":"514020578","characterName":"Biskuit","corporationID":"98270080","corporationName":"Bitslix","allianceID":"0","allianceName":"","factionID":"0","factionName":"","securityStatus":"-5.41782528582127","damageDone":"2315","finalBlow":"1","weaponTypeID":"12346","shipTypeID":"623"},{"characterID":"91943142","characterName":"Stefan Shekralay","corporationID":"98270080","corporationName":"Bitslix","allianceID":"0","allianceName":"","factionID":"0","factionName":"","securityStatus":"-2.3","damageDone":"4496","finalBlow":"0","weaponTypeID":"623","shipTypeID":"623"},{"characterID":"803489242","characterName":"Ryuicy","corporationID":"98270080","corporationName":"Bitslix","allianceID":"0","allianceName":"","factionID":"0","factionName":"","securityStatus":"-8.3","damageDone":"3310","finalBlow":"0","weaponTypeID":"2205","shipTypeID":"623"},{"characterID":"92638240","characterName":"Erwin Krym'L","corporationID":"98270080","corporationName":"Bitslix","allianceID":"0","allianceName":"","factionID":"0","factionName":"","securityStatus":"-9.8","damageDone":"3044","finalBlow":"0","weaponTypeID":"2205","shipTypeID":"623"},{"characterID":"482596415","characterName":"Piaggo","corporationID":"98270080","corporationName":"Bitslix","allianceID":"0","allianceName":"","factionID":"0","factionName":"","securityStatus":"-9.5","damageDone":"2707","finalBlow":"0","weaponTypeID":"623","shipTypeID":"623"},{"characterID":"91888530","characterName":"Heinrich Thomsen","corporationID":"98270080","corporationName":"Bitslix","allianceID":"0","allianceName":"","factionID":"0","factionName":"","securityStatus":"-9.9","damageDone":"781","finalBlow":"0","weaponTypeID":"623","shipTypeID":"623"},{"characterID":"1262873341","characterName":"Tav Erhen","corporationID":"98270080","corporationName":"Bitslix","allianceID":"0","allianceName":"","factionID":"0","factionName":"","securityStatus":"-2.8","damageDone":"751","finalBlow":"0","weaponTypeID":"2205","shipTypeID":"623"},{"characterID":"1794070679","characterName":"Ric Darn","corporationID":"98270080","corporationName":"Bitslix","allianceID":"0","allianceName":"","factionID":"0","factionName":"","securityStatus":"-8.8","damageDone":"317","finalBlow":"0","weaponTypeID":"2205","shipTypeID":"620"}],"items":[{"typeID":"24509","flag":"5","qtyDropped":"16","qtyDestroyed":"0","singleton":"0"},{"typeID":"24509","flag":"31","qtyDropped":"40","qtyDestroyed":"0","singleton":"0"},{"typeID":"11289","flag":"5","qtyDropped":"0","qtyDestroyed":"18","singleton":"0"},{"typeID":"24507","flag":"29","qtyDropped":"40","qtyDestroyed":"0","singleton":"0"},{"typeID":"2410","flag":"29","qtyDropped":"1","qtyDestroyed":"0","singleton":"0"},{"typeID":"11289","flag":"19","qtyDropped":"0","qtyDestroyed":"1","singleton":"0"},{"typeID":"28668","flag":"11","qtyDropped":"24","qtyDestroyed":"0","singleton":"0"},{"typeID":"27387","flag":"5","qtyDropped":"1905","qtyDestroyed":"0","singleton":"0"},{"typeID":"2410","flag":"30","qtyDropped":"1","qtyDestroyed":"0","singleton":"0"},{"typeID":"24507","flag":"28","qtyDropped":"40","qtyDestroyed":"0","singleton":"0"},{"typeID":"448","flag":"20","qtyDropped":"1","qtyDestroyed":"0","singleton":"0"},{"typeID":"4833","flag":"19","qtyDropped":"1","qtyDestroyed":"0","singleton":"0"},{"typeID":"11269","flag":"14","qtyDropped":"0","qtyDestroyed":"1","singleton":"0"},{"typeID":"2048","flag":"15","qtyDropped":"0","qtyDestroyed":"1","singleton":"0"},{"typeID":"4025","flag":"22","qtyDropped":"1","qtyDestroyed":"0","singleton":"0"},{"typeID":"11648","flag":"12","qtyDropped":"0","qtyDestroyed":"1","singleton":"0"},{"typeID":"24507","flag":"27","qtyDropped":"40","qtyDestroyed":"0","singleton":"0"},{"typeID":"2410","flag":"31","qtyDropped":"1","qtyDestroyed":"0","singleton":"0"},{"typeID":"31059","flag":"93","qtyDropped":"0","qtyDestroyed":"1","singleton":"0"},{"typeID":"33101","flag":"11","qtyDropped":"1","qtyDestroyed":"0","singleton":"0"},{"typeID":"11325","flag":"13","qtyDropped":"1","qtyDestroyed":"0","singleton":"0"},{"typeID":"2410","flag":"27","qtyDropped":"0","qtyDestroyed":"1","singleton":"0"},{"typeID":"29011","flag":"5","qtyDropped":"1","qtyDestroyed":"0","singleton":"0"},{"typeID":"2410","flag":"28","qtyDropped":"0","qtyDestroyed":"1","singleton":"0"},{"typeID":"5975","flag":"21","qtyDropped":"1","qtyDestroyed":"0","singleton":"0"},{"typeID":"31059","flag":"92","qtyDropped":"0","qtyDestroyed":"1","singleton":"0"},{"typeID":"21096","flag":"32","qtyDropped":"1","qtyDestroyed":"0","singleton":"0"},{"typeID":"24507","flag":"30","qtyDropped":"40","qtyDestroyed":"0","singleton":"0"}],"zkb":{"totalValue":"220077334.30","points":"178","source":"API"}},{"killID":"44358759","solarSystemID":"30004738","killTime":"2015-02-03 21:46:00","moonID":"0","victim":{"shipTypeID":"601","damageTaken":"529","factionName":"","factionID":"0","allianceName":"DARKNESS.","allianceID":"99002938","corporationName":"Darkness Holdings","corporationID":"98173905","characterName":"Ladrien","characterID":"1030961127","victim":""},"attackers":[{"characterID":"91943142","characterName":"Stefan Shekralay","corporationID":"98270080","corporationName":"Bitslix","allianceID":"0","allianceName":"","factionID":"0","factionName":"","securityStatus":"-2.30626747007283","damageDone":"200","finalBlow":"1","weaponTypeID":"12346","shipTypeID":"623"},{"characterID":"91888530","characterName":"Heinrich Thomsen","corporationID":"98270080","corporationName":"Bitslix","allianceID":"0","allianceName":"","factionID":"0","factionName":"","securityStatus":"-9.9","damageDone":"329","finalBlow":"0","weaponTypeID":"623","shipTypeID":"623"}],"items":[{"typeID":"34","flag":"5","qtyDropped":"1","qtyDestroyed":"0","singleton":"0"},{"typeID":"3638","flag":"27","qtyDropped":"0","qtyDestroyed":"1","singleton":"0"},{"typeID":"21096","flag":"28","qtyDropped":"1","qtyDestroyed":"0","singleton":"0"}],"zkb":{"totalValue":"945688.76","points":"1","source":"API"}}]
EOT;
        
        if (empty($fetchedResult))
            $fetchedResult = "[]";
        
        $fetchedResult = json_decode($fetchedResult);
        
        $battle = new Battle();
        $battle->import($fetchedResult);
        
        return $battle;
        
    }
    
    public static function testTimespanPattern($timespan) {
        $didMatch = preg_match('/^[0-9]{4}-([0-1][0-2]|0[1-9])-[0-3][0-9] [0-2][0-9]:[0-5][0-9] - [0-2][0-9]:[0-5][0-9]$/', $timespan, $reMatches, PREG_OFFSET_CAPTURE);
        
        if ($didMatch === FALSE)
            throw new Exception("Something bad happened when trying to check the given battleTimespan.");
        
        if ($didMatch == 1)
            return true;
        else
            return false;
    }
    
    public static function getZKBStartTime($timespan) {
        return preg_replace(
            '/^([0-9]{4})-([0-1][0-2]|0[1-9])-([0-3][0-9]) ([0-2][0-9]):([0-5][0-9]) - ([0-2][0-9]:[0-5][0-9])$/',
            '$1$2$3$4$5',
            $timespan
        );
    }
    
    public static function getZKBEndTime($timespan) {
        return preg_replace(
            '/^([0-9]{4})-([0-1][0-2]|0[1-9])-([0-3][0-9]) ([0-2][0-9]):([0-5][0-9]) - ([0-2][0-9]:[0-5][0-9])$/',
            '$1$2$3$6$7',
            $timespan
        );
    }
    
}